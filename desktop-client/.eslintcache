[{"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\index.js":"1","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\App.js":"2","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Home.js":"3","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\PageNotFoundError.js":"4","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Profile.js":"5","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Posts.js":"6","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Login.js":"7","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Navbar.js":"8","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\PostTypeContext.js":"9","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\CreateBox.js":"10","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\GeneralBox.js":"11","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\RecommendationBox.js":"12","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\AskForSuggestionsBox.js":"13","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\DiaryBox.js":"14","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\Container.js":"15","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\MovieSearch.js":"16","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\AskForSuggestionsBox.js":"17","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\RecommendationBox.js":"18","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\GeneralBox.js":"19","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\DiaryBox.js":"20","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\SelectedImage.js":"21","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\UserInfoForm.js":"22","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\Comment.js":"23","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\UserInfoBox.js":"24","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Movie.js":"25","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\PostsFetchTypeContext.js":"26","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\MovieInfoBox.js":"27"},{"size":224,"mtime":1609453553930,"results":"28","hashOfConfig":"29"},{"size":777,"mtime":1610039730970,"results":"30","hashOfConfig":"29"},{"size":1860,"mtime":1610041437717,"results":"31","hashOfConfig":"29"},{"size":100,"mtime":1610039922797,"results":"32","hashOfConfig":"29"},{"size":3970,"mtime":1610039988311,"results":"33","hashOfConfig":"29"},{"size":15171,"mtime":1610138964617,"results":"34","hashOfConfig":"29"},{"size":1209,"mtime":1610050081663,"results":"35","hashOfConfig":"29"},{"size":2699,"mtime":1610039875942,"results":"36","hashOfConfig":"29"},{"size":187,"mtime":1609708387453,"results":"37","hashOfConfig":"29"},{"size":2295,"mtime":1610040126731,"results":"38","hashOfConfig":"29"},{"size":12624,"mtime":1610144127054,"results":"39","hashOfConfig":"29"},{"size":12182,"mtime":1610144136612,"results":"40","hashOfConfig":"29"},{"size":10044,"mtime":1610144143949,"results":"41","hashOfConfig":"29"},{"size":12816,"mtime":1610144113682,"results":"42","hashOfConfig":"29"},{"size":11640,"mtime":1610052117818,"results":"43","hashOfConfig":"29"},{"size":2843,"mtime":1610146419773,"results":"44","hashOfConfig":"29"},{"size":3737,"mtime":1610040095746,"results":"45","hashOfConfig":"29"},{"size":6208,"mtime":1610040192965,"results":"46","hashOfConfig":"29"},{"size":4825,"mtime":1610040178220,"results":"47","hashOfConfig":"29"},{"size":5256,"mtime":1610040150642,"results":"48","hashOfConfig":"29"},{"size":2478,"mtime":1609107597065,"results":"49","hashOfConfig":"29"},{"size":8251,"mtime":1610040036425,"results":"50","hashOfConfig":"29"},{"size":4290,"mtime":1610040248090,"results":"51","hashOfConfig":"29"},{"size":2578,"mtime":1610040007107,"results":"52","hashOfConfig":"29"},{"size":2289,"mtime":1610147354878,"results":"53","hashOfConfig":"29"},{"size":153,"mtime":1609708387456,"results":"54","hashOfConfig":"29"},{"size":2887,"mtime":1610147300080,"results":"55","hashOfConfig":"29"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"ttzoo",{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"58"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"80","messages":"81","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"82","messages":"83","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"84","messages":"85","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"86","messages":"87","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88","usedDeprecatedRules":"58"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\index.js",[],["113","114"],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\App.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Home.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\PageNotFoundError.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Profile.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Posts.js",["115"],"import {useState, useEffect, useContext} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CreateBox from './create/CreateBox';\r\nimport Container from './create/Container';\r\nimport DisplayDiaryBox from './display/DiaryBox';\r\nimport DisplayGeneralBox from './display/GeneralBox';\r\nimport DisplayRecommendationBox from './display/RecommendationBox';\r\nimport DisplayAskForSuggestionsBox from './display/AskForSuggestionsBox';\r\nimport PostTypeContext from './PostTypeContext';\r\nimport PostsFetchTypeContext from './PostsFetchTypeContext';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { css } from \"@emotion/core\";\r\nimport ClipLoader from \"react-spinners/RingLoader\";\r\nimport {\r\n  isBrowser,\r\n  isMobile\r\n} from \"react-device-detect\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 200,\r\n  },\r\n});\r\n\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  margin-top: 13em;\r\n  border-color: red;\r\n`;\r\n\r\nconst overridePaginate = css`\r\n  display: block;\r\n  margin: auto;\r\n  margin-top: 2em;\r\n  margin-bottom: 3em;\r\n  border-color: red;\r\n`;\r\n\r\nexport default function Posts(props) {\r\n  const PostType = useContext(PostTypeContext);\r\n  const PostsFetchType = useContext(PostsFetchTypeContext);\r\n\r\n  const [isDisplayingLikers, setDisplayingLikers] = useState(false);\r\n  const [likersData, setLikersData] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [paginateLoading, setPaginateLoading] = useState(false);\r\n  const [numOfSkip, setNumOfSkip] = useState(-1);\r\n  const [hasMorePosts, setHasMorePosts] = useState(true);\r\n\r\n  const [postData, setPostData] = useState({\r\n    posts: [],\r\n    urls: [],\r\n    liked: [],\r\n    creatorProfileImageUrls: []\r\n  });\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    console.log(\"useeffect\");\r\n    setLoading(true);\r\n    const formData = new FormData();\r\n    if (props.postRoute === PostsFetchType.CREATOR) {\r\n      formData.append('creatorId', props.creatorId);\r\n    } else if (props.postRoute === PostsFetchType.MOVIE) {\r\n      formData.append('movieId', props.movieId);\r\n    }\r\n    formData.append('numOfSkip', numOfSkip);\r\n    fetch('/post/' + props.postRoute, {method: 'POST', body: formData})\r\n      .then(res => res.json())\r\n      .catch(err => console.log(err))\r\n      .then(res => {\r\n        setPostData({\r\n          posts: [...res.posts],\r\n          urls: [...res.urls],\r\n          liked: [...res.liked],\r\n          creatorProfileImageUrls: [...res.creatorProfileImageUrls]\r\n        });\r\n        setLoading(false);\r\n        setNumOfSkip(res.nextNumOfSkip);\r\n        if (res.posts.length === 0) {\r\n          setHasMorePosts(false);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, [props.postRoute, PostsFetchType.CREATOR, PostsFetchType.MOVIE, props.creatorId, props.movieId]);\r\n\r\n  function fetchMorePosts() {\r\n    setPaginateLoading(true);\r\n    const formData = new FormData();\r\n    if (props.postRoute === PostsFetchType.CREATOR) {\r\n      formData.append('creatorId', props.creatorId);\r\n    } else if (props.postRoute === PostsFetchType.MOVIE) {\r\n      formData.append('movieId', props.movieId);\r\n    }\r\n    formData.append('numOfSkip', numOfSkip);\r\n    fetch('/post/' + props.postRoute, {method: 'POST', body: formData})\r\n      .then(res => res.json())\r\n      .catch(err => console.log(err))\r\n      .then(res => {\r\n        setPostData(prevData => {\r\n          return {\r\n            posts: [...prevData.posts, ...res.posts],\r\n            urls: [...prevData.urls, ...res.urls],\r\n            liked: [...prevData.liked, ...res.liked],\r\n            creatorProfileImageUrls: [...prevData.creatorProfileImageUrls, ...res.creatorProfileImageUrls]\r\n          }\r\n        })\r\n        setNumOfSkip(res.nextNumOfSkip);\r\n        setPaginateLoading(false);\r\n        if (res.posts.length === 0) {\r\n          setHasMorePosts(false);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  const [createState, setCreateState] = useState({\r\n    isEditing: false,\r\n    type: null,\r\n    data: null\r\n  });\r\n\r\n  function handleAddPost(addedPostData) {\r\n    document.body.style.overflow = \"auto\";\r\n    setPostData(prevData => {\r\n      return {\r\n        posts: [addedPostData.post, ...prevData.posts],\r\n        urls: [addedPostData.urls, ...prevData.urls],\r\n        liked: [addedPostData.liked, ...prevData.liked],\r\n        creatorProfileImageUrls: [addedPostData.creatorProfileImageUrl, ...prevData.creatorProfileImageUrls]\r\n      }\r\n    });\r\n    setCreateState({isEditing: false, type: null, data: null});\r\n    if (props.addOrDeletePost) {\r\n      props.addOrDeletePost(true);\r\n    }\r\n  }\r\n\r\n  function handleEditPost(editedPostData) {\r\n    document.body.style.overflow = \"auto\";\r\n    setPostData(prevData => {\r\n      var previousPostDataFound = false;\r\n      for (var i = 0; i < prevData.posts.length; i++) {\r\n        if (prevData.posts[i]._id.trim() === editedPostData.post._id.trim()) {\r\n          prevData.posts[i] = editedPostData.post;\r\n          prevData.urls[i] = editedPostData.urls;\r\n          prevData.liked[i] = editedPostData.liked;\r\n          prevData.creatorProfileImageUrls[i] = editedPostData.creatorProfileImageUrl;\r\n          previousPostDataFound = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!previousPostDataFound) {\r\n        return {\r\n          posts: [editedPostData.post, ...prevData.posts],\r\n          urls: [editedPostData.urls, ...prevData.urls],\r\n          liked: [editedPostData.liked, ...prevData.liked],\r\n          creatorProfileImageUrls: [editedPostData.creatorProfileImageUrl, ...prevData.creatorProfileImageUrls]\r\n        }\r\n      } else {\r\n        return prevData;\r\n      }\r\n    });\r\n    setCreateState({isEditing: false, type: null, data: null});\r\n  }\r\n\r\n  function handleDeletePost(postId) {\r\n    document.body.style.overflow = \"auto\";\r\n    setPostData(prevData => {\r\n      const temp = {...prevData};\r\n      for (var i = 0; i < temp.posts.length; i++) {\r\n        if (temp.posts[i]._id.trim() === postId.trim()) {\r\n          temp.posts.splice(i, 1);\r\n          temp.urls.splice(i, 1);\r\n          temp.liked.splice(i, 1);\r\n          temp.creatorProfileImageUrls.splice(i, 1);\r\n          return temp;\r\n        }\r\n      }\r\n      return temp;\r\n    })\r\n    setCreateState({isEditing: false, type: null, data: null});\r\n    if (props.addOrDeletePost) {\r\n      props.addOrDeletePost(false);\r\n    }\r\n  }\r\n\r\n  const handlePostAction = {\r\n    handleAddPost: handleAddPost,\r\n    handleEditPost: handleEditPost,\r\n    handleDeletePost: handleDeletePost,\r\n    setLoading: setLoading\r\n  }\r\n\r\n  function handleEditClick(data) {\r\n    if (data.post.type === PostType.DIARY) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState({isEditing: true, type: PostType.DIARY, data: data});\r\n    } else if (data.post.type === PostType.RECOMMENDATION) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState({isEditing: true, type: PostType.RECOMMENDATION, data: data});\r\n    } else if (data.post.type === PostType.GENERAL) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState({isEditing: true, type: PostType.GENERAL, data: data});\r\n    } else if (data.post.type === PostType.ASK_SUGGESTION) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState({isEditing: true, type: PostType.ASK_SUGGESTION, data: data});\r\n    }\r\n  }\r\n\r\n  function handleExitClick() {\r\n    document.body.style.overflow = \"auto\";\r\n    setCreateState({isEditing: false, type: null, data: null});\r\n  }\r\n\r\n  function handleCreatePostClick(event) {\r\n    var name;\r\n    if (event.target.name) {\r\n      name = event.target.name;\r\n    } else if (event.target.id) {\r\n      name = event.target.id;\r\n    }\r\n    if (name === PostType.GENERAL) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState(prevData => {\r\n        return {...prevData, type: PostType.GENERAL};\r\n      })\r\n    } else if (name === PostType.RECOMMENDATION) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState(prevData => {\r\n        return {...prevData, type: PostType.RECOMMENDATION};\r\n      })\r\n    } else if (name === PostType.DIARY) {\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState(prevData => {\r\n        return {...prevData, type: PostType.DIARY};\r\n      })\r\n    } else if (name === PostType.ASK_SUGGESTION){\r\n      if (isBrowser) {\r\n        document.body.style.overflow = \"hidden\";\r\n      }\r\n      setCreateState(prevData => {\r\n        return {...prevData, type: PostType.ASK_SUGGESTION};\r\n      })\r\n    }\r\n  }\r\n\r\n  function displayLikers(postId) {\r\n    const formData = new FormData();\r\n    formData.append('postId', postId);\r\n    fetch('/post/getLikers', {method: 'POST', body: formData})\r\n        .then(res => res.json())\r\n        .catch(err => console.log(err))\r\n        .then(postLikes => {\r\n          setLikersData(postLikes.likers.map((liker, index) => {\r\n            return {\r\n              liker: liker,\r\n              likerUrl: postLikes.likerUrls[index]\r\n            }\r\n          }))\r\n          document.body.style.overflow = \"hidden\";\r\n          setDisplayingLikers(true);\r\n        })\r\n  }\r\n\r\n  return (\r\n    <div id=\"scrollableDiv\">\r\n      {loading ? <div className=\"sweet-loading\">\r\n        <ClipLoader color={\"#4287f5\"} loading={loading} css={override} size={200} />\r\n      </div> : <div>\r\n      <div\r\n        style={{\r\n          opacity: (isDisplayingLikers || createState.type) ? \"0.1\" : \"1\",\r\n          pointerEvents: (isDisplayingLikers || createState.type) ? \"none\": \"auto\",\r\n        }}>\r\n        {props.notCreateBox === undefined && <CreateBox handleClick={handleCreatePostClick}/>}\r\n        <InfiniteScroll\r\n          dataLength={postData.posts.length}\r\n          next={fetchMorePosts}\r\n          hasMore={hasMorePosts}\r\n          loader={<ClipLoader color={\"#4287f5\"} loading={paginateLoading} css={overridePaginate} size={100} />}\r\n        >\r\n        {postData.posts.map((post, index) => {\r\n          if (post.type === PostType.DIARY) {\r\n            return <DisplayDiaryBox\r\n              key={post._id}\r\n              post={post}\r\n              creatorProfileImageUrl={postData.creatorProfileImageUrls[index]}\r\n              urls={postData.urls[index]}\r\n              liked={postData.liked[index]}\r\n              handleEditClick={handleEditClick}\r\n              userId={props.user._id}\r\n              userProfileImageUrl={props.user.profileImageUrlCropped}\r\n              displayLikers={displayLikers}/>\r\n          } else if (post.type === PostType.RECOMMENDATION) {\r\n            return <DisplayRecommendationBox\r\n              key={post._id}\r\n              post={post}\r\n              creatorProfileImageUrl={postData.creatorProfileImageUrls[index]}\r\n              urls={postData.urls[index]}\r\n              liked={postData.liked[index]}\r\n              handleEditClick={handleEditClick}\r\n              userId={props.user._id}\r\n              userProfileImageUrl={props.user.profileImageUrlCropped}\r\n              displayLikers={displayLikers}/>\r\n          } else if (post.type === PostType.ASK_SUGGESTION) {\r\n            return <DisplayAskForSuggestionsBox\r\n              key={post._id}\r\n              post={post}\r\n              creatorProfileImageUrl={postData.creatorProfileImageUrls[index]}\r\n              urls={postData.urls[index]}\r\n              liked={postData.liked[index]}\r\n              handleEditClick={handleEditClick}\r\n              userId={props.user._id}\r\n              userProfileImageUrl={props.user.profileImageUrlCropped}\r\n              displayLikers={displayLikers}/>\r\n          } else {\r\n            return <DisplayGeneralBox\r\n              key={post._id}\r\n              post={post}\r\n              creatorProfileImageUrl={postData.creatorProfileImageUrls[index]}\r\n              urls={postData.urls[index]}\r\n              liked={postData.liked[index]}\r\n              handleEditClick={handleEditClick}\r\n              userId={props.user._id}\r\n              userProfileImageUrl={props.user.profileImageUrlCropped}\r\n              displayLikers={displayLikers}/>\r\n          }\r\n        })}\r\n        </InfiniteScroll>\r\n      </div>\r\n      <div style={{textAlign: \"center\"}}>\r\n        {createState.type && <Container\r\n          setLoading={setLoading}\r\n          createState={createState}\r\n          handleExitClick={handleExitClick}\r\n          handlePostAction={handlePostAction}/>}\r\n      </div>\r\n      {isDisplayingLikers && <TableContainer\r\n          component={Paper}\r\n          style={{\r\n            width: isBrowser ? \"500px\" : \"90%\",\r\n            height: \"300px\",\r\n            overflow: \"auto\",\r\n            position: \"absolute\",\r\n            top: window.pageYOffset + (window.innerHeight / 4),\r\n            left: isBrowser && \"33.5%\",\r\n            margin: isMobile && \"auto\",\r\n            zIndex: \"999999999999999999999999999999999999\"}}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>\r\n                <ThumbUpAltIcon />\r\n              </TableCell>\r\n              <TableCell align=\"right\"><IconButton onClick={() => {setDisplayingLikers(false); document.body.style.overflow = \"auto\";}}>\r\n          <Clear/>\r\n        </IconButton></TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {likersData && likersData.map((likerData) => (\r\n              <TableRow key={likerData.liker._id}>\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                <div style={{display: \"flex\"}}>\r\n                  <div>\r\n                  <Avatar alt=\"liker image\" src={likerData.likerUrl ? likerData.likerUrl : process.env.PUBLIC_URL + '/images/loginImage.png'} />\r\n                  </div>\r\n                  <div style={{marginTop: \"9px\", marginLeft: \"5px\"}}>\r\n                  {likerData.liker.nickname}\r\n                  </div>\r\n                </div>\r\n                </TableCell>\r\n                <TableCell align=\"right\"><Button variant=\"contained\" color=\"primary\" onClick={() => {window.open(\"/profile/\" + likerData.liker._id, \"_self\")}}>\r\n                  Visit Profile\r\n                </Button></TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>}\r\n    </div>}\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Login.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Navbar.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\PostTypeContext.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\CreateBox.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\GeneralBox.js",["116","117"],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\RecommendationBox.js",["118","119"],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\AskForSuggestionsBox.js",["120","121"],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\DiaryBox.js",["122","123"],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\Container.js",["124","125","126"],"import DiaryBox from './DiaryBox';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AskForSuggestionsBox from './AskForSuggestionsBox';\r\nimport GeneralBox from './GeneralBox';\r\nimport RecommendationBox from './RecommendationBox';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport Backspace from '@material-ui/icons/Backspace'\r\nimport MovieSearch from './MovieSearch';\r\nimport {useState, useContext, useEffect, useRef} from 'react';\r\nimport PostTypeContext from '../PostTypeContext';\r\nimport {\r\n  isBrowser\r\n} from \"react-device-detect\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  createContainer: {\r\n    width: isBrowser ? \"500px\" : \"95%\",\r\n    height: isBrowser && \"500px\",\r\n    margin: \"auto\",\r\n    marginTop: window.pageYOffset + (window.innerHeight / 6),\r\n    backgroundColor: \"white\",\r\n    top: \"0\",\r\n    bottom: \"0\",\r\n    left: \"0\",\r\n    right: \"0\",\r\n    borderRadius: \"5px\",\r\n    boxShadow: \"0 0 20px #999\",\r\n    zIndex: \"99\",\r\n    position: \"absolute\",\r\n    paddingLeft: \"5px\",\r\n    paddingRight: \"5px\",\r\n    paddingBottom: \"3px\",\r\n    overflow: \"auto\",\r\n  }\r\n}));\r\n\r\nexport default function Container(props) {\r\n  const [isSearchingMovie, setSearchingMovie] = useState(false);\r\n  const [moviesList, setMoviesList] = useState([]);\r\n  const [willBeDeletedFiles, setWillBeDeletedFiles] = useState([]);\r\n  const [deletedExistingFiles, setDeletedExistingFiles] = useState([]);\r\n  const form = useRef();\r\n  const classes = useStyles();\r\n\r\n  const [createInput, setCreateInput] = useState({\r\n    diaryTitle: \"\",\r\n    text: \"\",\r\n    rating: 5,\r\n    uploadedFiles: [],\r\n    chosenMovies: [],\r\n    movieTitleInputValue: \"\"\r\n  })\r\n\r\n  const photoGalleryStylings = [{\r\n      width: \"50%\",\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\"\r\n    },\r\n    {\r\n    }]\r\n\r\n  const PostType = useContext(PostTypeContext);\r\n\r\n  useEffect(() => {\r\n    const ac = new AbortController();\r\n    async function fetchData() {\r\n      if (props.createState.isEditing) {\r\n        const movieIds = props.createState.data.post.movieIds;\r\n        const promises = [];\r\n        for (var i = 0; i < movieIds.length; i++) {\r\n          var movieDataRaw;\r\n          try {\r\n            movieDataRaw =\r\n                await fetch(\"https://api.themoviedb.org/3/movie/\" + props.createState.data.post.movieIds[i] + \"?api_key=ee1e60bc7d68306eef94c3adc2fdd763&language=en-US\");\r\n          } catch (err) {\r\n            movieDataRaw = await fetch(\"https://api.themoviedb.org/3/tv/\" + props.createState.data.post.movieIds[i] + \"?api_key=ee1e60bc7d68306eef94c3adc2fdd763&language=en-US\");\r\n          }\r\n          const movieData = await movieDataRaw.json();\r\n          const title = movieData.title ? movieData.title : movieData.name;\r\n          promises.push({id: movieIds[i], title: title});\r\n        }\r\n        const resolved = await Promise.all(promises);\r\n        setCreateInput(prevData => {\r\n          return {\r\n            ...prevData,\r\n            diaryTitle: props.createState.data.post.title,\r\n            rating: props.createState.data.post.rating,\r\n            text: props.createState.data.post.text,\r\n            uploadedFiles: props.createState.data.post.fileIds.map((fileId, index) => {\r\n              return {src: props.createState.data.urls[index], width: 1, height: 1, fileId: fileId};\r\n            }),\r\n            chosenMovies: resolved\r\n          }\r\n        })\r\n      }\r\n    }\r\n    fetchData();\r\n    return () => ac.abort();\r\n  }, []);\r\n\r\n  const handleInputChange = {\r\n    handleDiaryTitleChange: (event) => {\r\n      setCreateInput(prevData => {\r\n        return {...prevData, diaryTitle: event.target.value};\r\n      })\r\n    },\r\n    handleTextChange: (event) => {\r\n      setCreateInput(prevData => {\r\n        return {...prevData, text: event.target.value};\r\n      })\r\n    },\r\n    handleRatingChange: (event) => {\r\n      setCreateInput(prevData => {\r\n        return {...prevData, rating: event.target.value};\r\n      })\r\n    },\r\n    handleUploadedFilesChange: (event) => {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        const re = /\\.(gif|jpe?g|tiff?|png|webp|bmp)$/i;\r\n        if (re.test(file.name)) {\r\n          setCreateInput(prevData => {\r\n            return {\r\n              ...prevData,\r\n              uploadedFiles: [...prevData.uploadedFiles, {src: URL.createObjectURL(file), file: file, width: 1, height: 1}]\r\n            };\r\n          })\r\n        } else {\r\n          alert('only upload image files.')\r\n        }\r\n      }\r\n    },\r\n    handleMovieClick: (movieId, movieTitle) => {\r\n      setCreateInput(prevData => {\r\n        return {\r\n          ...prevData,\r\n          chosenMovies: [...prevData.chosenMovies, {id: movieId, title: movieTitle}]\r\n        }\r\n      })\r\n    },\r\n    handleDeleteChosenMovie: (movieId) => {\r\n      setCreateInput(prevData => {\r\n        return {\r\n          ...prevData,\r\n          chosenMovies: prevData.chosenMovies.filter(data => data.id !== movieId)\r\n        }\r\n      })\r\n    },\r\n    handleMovieTitleInput: (event) => {\r\n      const value = event.target.value;\r\n      setCreateInput(prevData => {\r\n        return {...prevData, movieTitleInputValue: value};\r\n      })\r\n      if (value.trim()) {\r\n        fetch(\"https://api.themoviedb.org/3/search/multi?api_key=ee1e60bc7d68306eef94c3adc2fdd763&language=en-US&query=\" + value)\r\n          .then(res => res.json())\r\n          .catch(console.log)\r\n          .then(res => {\r\n            setMoviesList(res.results);\r\n          })\r\n          .catch(err => console.log(err));\r\n      } else {\r\n        setMoviesList([]);\r\n      }\r\n    },\r\n    handleChooseToDeleteFile: (index) => {\r\n      setWillBeDeletedFiles(prevData => {\r\n        return [...prevData, index];\r\n      })\r\n    },\r\n    handleChooseNotToDeleteFile: (index) => {\r\n      setWillBeDeletedFiles(prevData => {\r\n        return prevData.filter(val => {\r\n          return val !== index;\r\n        })\r\n      });\r\n    },\r\n    handleDeleteChosenFiles: async () => {\r\n      const tempDeletedFiles = [...willBeDeletedFiles].sort();\r\n      const tempUploadedFiles = [...createInput.uploadedFiles];\r\n      for (var i = tempDeletedFiles.length - 1; i >= 0; i--) {\r\n        if (tempUploadedFiles[tempDeletedFiles[i]].fileId) {\r\n          await setDeletedExistingFiles(prevData => {\r\n            return [...prevData, tempUploadedFiles[tempDeletedFiles[i]].fileId];\r\n          })\r\n        }\r\n        tempUploadedFiles.splice(tempDeletedFiles[i], 1);\r\n      }\r\n      setCreateInput(prevData => {\r\n        return {...prevData, uploadedFiles: tempUploadedFiles};\r\n      })\r\n      setWillBeDeletedFiles([]);\r\n    }\r\n  }\r\n\r\n  function handleSearchFieldClick() {\r\n    setSearchingMovie(true);\r\n  }\r\n\r\n  function handleSearchFieldUnclick() {\r\n    if (isSearchingMovie) {\r\n      setSearchingMovie(false);\r\n    }\r\n  }\r\n\r\n  function getPostHeader(type) {\r\n    if (type === PostType.GENERAL) {\r\n      return \"General Post\"\r\n    } else if (type === PostType.RECOMMENDATION) {\r\n      return \"Recommendation Post\"\r\n    } else if (type === PostType.DIARY) {\r\n      return \"Diary Post\"\r\n    } else if (type === PostType.ASK_SUGGESTION) {\r\n      return \"Ask for Movie Recommendations\"\r\n    }\r\n  }\r\n\r\n  const renderProps = (param) => {\r\n    return {\r\n      createInput: createInput,\r\n      deletedExistingFiles: deletedExistingFiles,\r\n      handlePostAction: props.handlePostAction,\r\n      post: param.data ? param.data.post : null,\r\n      isEditing: param.isEditing,\r\n      handleInputChange: handleInputChange,\r\n      photoGalleryStylings: photoGalleryStylings,\r\n      handleSubmit: handleSubmit,\r\n      deletePost: deletePost,\r\n      formRef: form\r\n    }\r\n  }\r\n\r\n  function renderBox(param) {\r\n    if (param.type === PostType.GENERAL) {\r\n      return <GeneralBox renderProps={renderProps(param)} />\r\n    } else if (param.type === PostType.DIARY) {\r\n      return <DiaryBox renderProps={renderProps(param)} />\r\n    } else if (param.type === PostType.RECOMMENDATION) {\r\n      return <RecommendationBox renderProps={renderProps(param)} />\r\n    } else if (param.type === PostType.ASK_SUGGESTION) {\r\n      return <AskForSuggestionsBox renderProps={renderProps(param)} />\r\n    }\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    if (props.createState.isEditing) {\r\n      event.preventDefault();\r\n      props.handlePostAction.setLoading(true);\r\n      const formData = new FormData(form.current);\r\n      formData.set('postId', props.createState.data.post._id);\r\n      formData.set('postType', props.createState.type);\r\n      for (var i = 0; i < deletedExistingFiles.length; i++) {\r\n        formData.append('deletedFileIds[]', deletedExistingFiles[i]);\r\n      }\r\n      for (var j = 0; j < createInput.uploadedFiles.length; j++) {\r\n        if (createInput.uploadedFiles[j].file) {\r\n          formData.append('fileInput[]', createInput.uploadedFiles[j].file);\r\n        } else {\r\n          formData.append('fileInput[]', createInput.uploadedFiles[j].fileId);\r\n        }\r\n      }\r\n      fetch('/post/edit', {method: 'POST', body: formData})\r\n        .then(res => res.json())\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          props.handlePostAction.handleEditPost(res);\r\n          props.handlePostAction.setLoading(false);\r\n        })\r\n        .catch(err => console.log(err));\r\n    } else {\r\n      event.preventDefault();\r\n      props.handlePostAction.setLoading(true);\r\n      const formData = new FormData(form.current);\r\n      for (var k = 0; k < createInput.uploadedFiles.length; k++) {\r\n        formData.append('fileInput[]', createInput.uploadedFiles[k].file);\r\n      }\r\n      fetch('/post/create/' + props.createState.type, {method: 'POST', body: formData})\r\n          .then(res => res.json())\r\n          .catch(err => console.log(err))\r\n          .then(res => {\r\n            props.handlePostAction.handleAddPost(res);\r\n            props.handlePostAction.setLoading(false);\r\n          })\r\n          .catch(err => console.log(err));\r\n    }\r\n  }\r\n\r\n  function deletePost() {\r\n    const formData = new FormData();\r\n    formData.set('postId', props.createState.data.post._id);\r\n    formData.set('fileIds', props.createState.data.post.fileIds);\r\n    fetch('/post/delete', {method: 'POST', body: formData})\r\n        .then(res => res.json())\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res) {\r\n            props.handlePostAction.handleDeletePost(props.createState.data.post._id);\r\n          }\r\n        })\r\n  }\r\n\r\n  return (\r\n    <div className={classes.createContainer}>\r\n      <IconButton style={{position: \"absolute\", top: \"10px\", right: \"10px\"}} onClick={props.handleExitClick}>\r\n        <Clear/>\r\n      </IconButton>\r\n      <p style={{fontFamily: \"Pacifico\", fontSize: \"1.5em\"}}>{getPostHeader(props.createState.type)}</p>\r\n      {isSearchingMovie && <IconButton style={{position: \"absolute\",top: \"15px\",left: \"15px\"}} onClick={handleSearchFieldUnclick}><Backspace /></IconButton>}\r\n      {props.createState.type !== PostType.ASK_SUGGESTION && <TextField\r\n        label=\"Movie title\"\r\n        variant=\"outlined\"\r\n        style={{width: \"90%\"}}\r\n        onClick={handleSearchFieldClick}\r\n        onChange={handleInputChange.handleMovieTitleInput}\r\n        value={!isSearchingMovie ? \"\" : createInput.movieTitleInputValue}/>}\r\n      {isSearchingMovie ? <MovieSearch\r\n        postType={props.createState.type}\r\n        createInput={createInput}\r\n        moviesList={moviesList}\r\n        handleMovieClick={handleInputChange.handleMovieClick}/> : renderBox(props.createState)}\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\MovieSearch.js",["127","128","129"],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\AskForSuggestionsBox.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\RecommendationBox.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\GeneralBox.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\create\\DiaryBox.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\SelectedImage.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\UserInfoForm.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\display\\Comment.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\UserInfoBox.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\Movie.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\PostsFetchTypeContext.js",[],"C:\\Users\\noogler\\Desktop\\movelp\\desktop-client\\src\\components\\MovieInfoBox.js",[],{"ruleId":"130","replacedBy":"131"},{"ruleId":"132","replacedBy":"133"},{"ruleId":"134","severity":1,"message":"135","line":99,"column":6,"nodeType":"136","endLine":99,"endColumn":101,"suggestions":"137"},{"ruleId":"134","severity":1,"message":"135","line":115,"column":6,"nodeType":"136","endLine":115,"endColumn":43,"suggestions":"138"},{"ruleId":"139","severity":1,"message":"140","line":324,"column":48,"nodeType":"141","endLine":324,"endColumn":182},{"ruleId":"134","severity":1,"message":"135","line":108,"column":6,"nodeType":"136","endLine":108,"endColumn":43,"suggestions":"142"},{"ruleId":"139","severity":1,"message":"140","line":305,"column":46,"nodeType":"141","endLine":305,"endColumn":180},{"ruleId":"134","severity":1,"message":"135","line":88,"column":6,"nodeType":"136","endLine":88,"endColumn":22,"suggestions":"143"},{"ruleId":"139","severity":1,"message":"140","line":255,"column":48,"nodeType":"141","endLine":255,"endColumn":182},{"ruleId":"134","severity":1,"message":"135","line":115,"column":6,"nodeType":"136","endLine":115,"endColumn":43,"suggestions":"144"},{"ruleId":"139","severity":1,"message":"140","line":328,"column":48,"nodeType":"141","endLine":328,"endColumn":182},{"ruleId":"145","severity":1,"message":"146","line":6,"column":8,"nodeType":"147","messageId":"148","endLine":6,"endColumn":14},{"ruleId":"134","severity":1,"message":"149","line":102,"column":6,"nodeType":"136","endLine":102,"endColumn":8,"suggestions":"150"},{"ruleId":"151","severity":1,"message":"152","line":186,"column":41,"nodeType":"153","messageId":"154","endLine":188,"endColumn":12},{"ruleId":"145","severity":1,"message":"155","line":9,"column":3,"nodeType":"147","messageId":"148","endLine":9,"endColumn":12},{"ruleId":"145","severity":1,"message":"156","line":10,"column":3,"nodeType":"147","messageId":"148","endLine":10,"endColumn":11},{"ruleId":"145","severity":1,"message":"157","line":60,"column":9,"nodeType":"147","messageId":"148","endLine":60,"endColumn":16},"no-native-reassign",["158"],"no-negated-in-lhs",["159"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'numOfSkip'. Either include it or remove the dependency array.","ArrayExpression",["160"],["161"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement",["162"],["163"],["164"],"no-unused-vars","'Button' is defined but never used.","Identifier","unusedVar","React Hook useEffect has missing dependencies: 'props.createState.data.post.fileIds', 'props.createState.data.post.movieIds', 'props.createState.data.post.rating', 'props.createState.data.post.text', 'props.createState.data.post.title', 'props.createState.data.urls', and 'props.createState.isEditing'. Either include them or remove the dependency array. If 'setCreateInput' needs the current value of 'props.createState.data.post.title', you can also switch to useReducer instead of useState and read 'props.createState.data.post.title' in the reducer.",["165"],"no-loop-func","Function declared in a loop contains unsafe references to variable(s) 'i'.","ArrowFunctionExpression","unsafeRefs","'isBrowser' is defined but never used.","'isMobile' is defined but never used.","'counter' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"166","fix":"167"},{"desc":"168","fix":"169"},{"desc":"168","fix":"170"},{"desc":"171","fix":"172"},{"desc":"168","fix":"173"},{"desc":"174","fix":"175"},"Update the dependencies array to be: [props.postRoute, PostsFetchType.CREATOR, PostsFetchType.MOVIE, props.creatorId, props.movieId, numOfSkip]",{"range":"176","text":"177"},"Update the dependencies array to be: [numOfSkip, props.post._id, props.post.movieIds]",{"range":"178","text":"179"},{"range":"180","text":"179"},"Update the dependencies array to be: [numOfSkip, props.post._id]",{"range":"181","text":"182"},{"range":"183","text":"179"},"Update the dependencies array to be: [props.createState.data.post.fileIds, props.createState.data.post.movieIds, props.createState.data.post.rating, props.createState.data.post.text, props.createState.data.post.title, props.createState.data.urls, props.createState.isEditing]",{"range":"184","text":"185"},[3378,3473],"[props.postRoute, PostsFetchType.CREATOR, PostsFetchType.MOVIE, props.creatorId, props.movieId, numOfSkip]",[4197,4234],"[numOfSkip, props.post._id, props.post.movieIds]",[4026,4063],[3063,3079],"[numOfSkip, props.post._id]",[4195,4232],[3599,3601],"[props.createState.data.post.fileIds, props.createState.data.post.movieIds, props.createState.data.post.rating, props.createState.data.post.text, props.createState.data.post.title, props.createState.data.urls, props.createState.isEditing]"]